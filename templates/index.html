<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Таро онлайн</title>
    <link rel="stylesheet" href="/static/styles.css">  <!-- Подключение стилей -->
</head>
<body>
    <h1>Раскинь Таро!</h1>
    <button onclick="drawCards()">Получить карты</button>
    <div id="cardContainer" class="flex-container"></div>  <!-- Класс flex-container -->

    <script>
        async function drawCards() {
            try {
                const res = await fetch('/api/draw');
                const cards = await res.json();
                const container = document.getElementById('cardContainer');
                container.innerHTML = '';  // очищаем контейнер
                cards.forEach(card => {
                    const div = document.createElement('div');
                    div.classList.add('card-back');
                    div.onclick = () => showCardDetails(card.title, card.description, card.img);
                    div.style.backgroundImage = `url("${'/static/cards/taro_back.jpg'}")`;  // рубашка карт
                    container.appendChild(div);
                });
            } catch(e) {
                alert('Ошибка загрузки карт.');
            }
        }

        function showCardDetails(title, description, imageUrl) {
            const detailsDiv = document.createElement('div');
            detailsDiv.classList.add('hidden-card-details');
            detailsDiv.innerHTML = `
                <img src="${imageUrl}" alt="${title}" />
                <p><b>${title}:</b> ${description}</p>
                <button onclick="this.parentNode.remove();">Закрыть</button>
            `;
            document.body.appendChild(detailsDiv);
            detailsDiv.style.display = 'block';
        }
    </script>
</body>
</html>
